<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–≤–∏–∑-–ò–≥—Ä–∞</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="app-container">
         
        <!-- 1. –≠–ö–†–ê–ù –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò -->
        <div id="state-registration" class="state">
            <div class="container">
                <h1>üéØ –ö–≤–∏–∑-–∏–≥—Ä–∞</h1>
                <p>–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –¥–ª—è —É—á–∞—Å—Ç–∏—è. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∏–≥—Ä–æ–≤–æ–π –Ω–∏–∫–Ω–µ–π–º:</p>
                
                <form id="registration-form">
                    <input type="text" id="nickname-input" placeholder="–í–∞—à –∫—Ä—É—Ç–æ–π –Ω–∏–∫" maxlength="20" required>
                    <button type="submit" id="register-btn">–£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å!</button>
                </form>

                <!-- <div id="registration-success" class="hidden">
                    <div class="icon">‚úÖ</div>
                    <p>–í—ã —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –∫–∞–∫ <span id="registered-nickname"></span>!</p>
                    <p>–û–∂–∏–¥–∞–π—Ç–µ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã.</p>
                </div> -->

                <div id="registration-error" class="hidden error-message"></div>
            </div>
        </div>


        <!-- 2. –≠–ö–†–ê–ù –û–ñ–ò–î–ê–ù–ò–Ø -->
        <div id="state-waiting" class="state hidden">
            <div class="container">
                <div class="icon">‚è≥</div>
                <h1>–û–∂–∏–¥–∞–µ–º –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã</h1>
                <p>–í–∞—à –Ω–∏–∫–Ω–µ–π–º: <strong id="waiting-nickname"></strong></p>
                <p>–ö–∞–∫ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω –∑–∞–ø—É—Å—Ç–∏—Ç –∏–≥—Ä—É, –∑–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å. –û—Å—Ç–∞–≤–∞–π—Ç–µ—Å—å –Ω–∞ —Å–≤—è–∑–∏!</p>
                
                <!-- –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ -->
                <button onclick="logout()" class="btn btn-outline" style="margin-top: 2rem;">
                    –í—ã–π—Ç–∏ –∏ —Å–º–µ–Ω–∏—Ç—å –Ω–∏–∫–Ω–µ–π–º
                </button>
                
                <div class="loader"></div>
            </div>
        </div>

        <!-- 3. –≠–ö–†–ê–ù –ò–ì–†–´ (–°–ï–†–î–¶–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø) -->
        <div id="state-game" class="state hidden">
            <div class="container">
                <!-- –í–µ—Ä—Ö–Ω–∏–π –±–ª–æ–∫: –¢–∞–π–º–µ—Ä –∏ –Ω–æ–º–µ—Ä –≤–æ–ø—Ä–æ—Å–∞ -->
                <div class="question-header">
                    <div id="question-timer" class="timer">20:00</div>
                    <div id="question-progress">–í–æ–ø—Ä–æ—Å <span id="current-q">1</span>/<span id="total-qs">5</span></div>
                </div>

                <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä -->
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                </div>

                <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –±–ª–æ–∫: –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞ -->
                <div class="question-block">
                    <h2 id="question-text">–¢–µ–∫—Å—Ç —Ç–µ–∫—É—â–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...</h2>
                </div>

                <!-- –ù–∏–∂–Ω–∏–π –±–ª–æ–∫: –§–æ—Ä–º–∞ –æ—Ç–≤–µ—Ç–∞ -->
                <div class="answer-block">
                    <textarea id="answer-textarea" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π –æ—Ç–≤–µ—Ç –∑–¥–µ—Å—å..." rows="5"></textarea>
                    
                    <div class="actions">
                        <button id="submit-answer-btn" disabled>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç</button>
                        <div id="answer-status"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 4. –≠–ö–†–ê–ù –ú–ï–ñ–î–£ –í–û–ü–†–û–°–ê–ú–ò -->
        <div id="state-between" class="state hidden">
            <div class="container">
                <div class="icon">‚úÖ</div>
                <h2>–û—Ç–≤–µ—Ç –ø—Ä–∏–Ω—è—Ç!</h2>
                <p>–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å –ø–æ—è–≤–∏—Ç—Å—è —á–µ—Ä–µ–∑ <span id="between-timer">5</span> —Å–µ–∫—É–Ω–¥...</p>
            </div>
        </div>

        <!-- 5. –≠–ö–†–ê–ù –ó–ê–í–ï–†–®–ï–ù–ò–Ø -->
        <div id="state-finished" class="state hidden">
            <div class="container">
                <div class="icon">üèÅ</div>
                <h1>–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</h1>
                <p>–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à–∏ –æ—Ç–≤–µ—Ç—ã –∏ —É—á–∞—Å—Ç–∏–µ!</p>
                <p>–°–µ–π—á–∞—Å –Ω–∞—à –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã. –ò—Ç–æ–≥–∏ –∏ —Å–ø–∏—Å–æ–∫ –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π –±—É–¥—É—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã –∑–¥–µ—Å—å –ø–æ–∑–∂–µ.</p>
            </div>
        </div>

        <!-- 6. –≠–ö–†–ê–ù –ü–û–ë–ï–î–ò–¢–ï–õ–Ø -->
        <div id="state-winner" class="state hidden">
            <div class="container">
                <div class="icon">üèÜ</div>
                <h1>–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h1>
                <p>–í–∞—à–∏ –æ—Ç–≤–µ—Ç—ã –±—ã–ª–∏ –æ–¥–Ω–∏–º–∏ –∏–∑ —Å–∞–º—ã—Ö –ª—É—á—à–∏—Ö! –í—ã –≤–æ—à–ª–∏ –≤ —á–∏—Å–ª–æ –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π!</p>

                <div class="prize-info">
                    <h3>–í–∞—à –ø—Ä–∏–∑:</h3>
                    <p>–ü–æ–¥–æ–π–¥–∏—Ç–µ –∫ —Å—Ç–æ–π–∫–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤ –Ω–∞ –ø–µ—Ä–≤–æ–º —ç—Ç–∞–∂–µ –∏ –Ω–∞–∑–æ–≤–∏—Ç–µ —Å–≤–æ–π –Ω–∏–∫–Ω–µ–π–º <strong id="winner-nickname"></strong> –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞—Å–ª—É–∂–µ–Ω–Ω–æ–π –Ω–∞–≥—Ä–∞–¥—ã.</p>
                </div>

                <p>–ï—â–µ —Ä–∞–∑ —Å–ø–∞—Å–∏–±–æ –∑–∞ —É—á–∞—Å—Ç–∏–µ!</p>
            </div>
        </div>

        <!-- 7. –≠–ö–†–ê–ù –ê–î–ú–ò–ù-–ü–ê–ù–ï–õ–ò -->
        <div id="state-admin" class="state hidden">
            <div class="container">
                <div class="card">
                    
                    <h1>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>
                    
                    <div class="admin-stats">
                        <div class="stat-card">
                            <h3>–°—Ç–∞—Ç—É—Å –∏–≥—Ä—ã</h3>
                            <p id="admin-game-status">–ù–µ –Ω–∞—á–∞—Ç–∞</p>
                        </div>
                        <div class="stat-card">
                            <h3>–¢–µ–∫—É—â–∏–π –≤–æ–ø—Ä–æ—Å</h3>
                            <p id="admin-current-question">0/5</p>
                        </div>
                    </div>

                    <div class="admin-actions">
                        <button onclick="adminStartGame()" class="btn btn-success" id="admin-start-btn">
                            –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
                        </button>
                        
                        <button onclick="adminNextQuestion()" class="btn btn-primary" id="admin-next-btn" disabled>
                            –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å
                        </button>
                        
                        <button onclick="adminFinishGame()" class="btn btn-warning" id="admin-finish-btn" disabled>
                            –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É
                        </button>
                        
                        <button onclick="adminPublishResults()" class="btn btn-info" id="admin-publish-btn" disabled>
                            –û–±—ä—è–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                        </button>
                        
                        <button onclick="adminRestartGame()" class="btn btn-danger">
                            –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ
                        </button>
                    </div>

                    <div class="admin-notification" id="admin-notification"></div>
                    
                    <button onclick="showState('waiting')" class="btn btn-outline">
                        ‚Üê –ù–∞–∑–∞–¥ –∫ –∏–≥—Ä–µ
                    </button>
                </div>
            </div>
        </div>

    </div>

    <script src="api-client.js"></script>
    <script src="script.js"></script>
</body>
</html>